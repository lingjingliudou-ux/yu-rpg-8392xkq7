<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚†ã†ã¡ã‚ƒã‚“RPG EVOLUTION</title>
<style>
body{
  background:#111;
  color:#fff;
  font-family:"Courier New", monospace;
  text-align:center;
  margin:0;
}
#game{
  max-width:520px;
  margin:auto;
  padding:15px;
  background:#222;
  border:4px solid #fff;
}
button{
  margin:4px;
  padding:8px;
  background:#444;
  color:white;
  border:2px solid white;
}
button:hover{background:#666;}
.bar{
  height:12px;
  background:#555;
  margin:4px 0;
}
.fill{
  height:100%;
  background:#00ff88;
}
.hidden{display:none;}
.big{font-size:28px;}
</style>
</head>
<body>

<div id="game">
<h1>ã‚†ã†ã¡ã‚ƒã‚“RPG EVOLUTION</h1>

<p id="stage">ã‚¹ãƒ†ãƒ¼ã‚¸ 1</p>
<p id="enemyName" class="big">ãƒ¡ã‚¬ãƒå±‹ã•ã‚“</p>

<div class="bar"><div id="enemyHPbar" class="fill"></div></div>
<p id="enemyHPtext"></p>

<p>ğŸ˜ ã‚†ã†ã¡ã‚ƒã‚“ Lv <span id="level">1</span></p>
<div class="bar"><div id="playerHPbar" class="fill"></div></div>
<p id="playerHPtext"></p>

<p>EXP: <span id="exp">0</span> / 50</p>
<p>ğŸ”¥ã‚²ãƒ¼ã‚¸: <span id="rage">0</span>%</p>
<p>ğŸ’°ã‚³ã‚¤ãƒ³: <span id="coins"></span></p>

<p id="log">å†’é™ºãŒå§‹ã¾ã£ãŸï¼</p>

<button onclick="attack()">ãŸãŸã</button>
<button onclick="skill()">ãƒ¡ã‚¬ãƒãƒ“ãƒ¼ãƒ </button>
<button onclick="ultimate()">ğŸ”¥è¶…å¿…æ®º</button>
<button onclick="shop()">ã‚·ãƒ§ãƒƒãƒ—</button>
</div>

<script>
let player = {
  hp:100,
  maxHp:100,
  level:1,
  exp:0,
  rage:0,
  coins:50
};

let enemy = {};
let stage=1;

function generateEnemy(){
  let names=["ãƒ¡ã‚¬ãƒå±‹ã•ã‚“","ç§»å‹•ãƒ¡ã‚¬ãƒå±‹å°","é«˜ç´šãƒ¡ã‚¬ãƒåº—é•·"];
  let bossNames=["ä¼èª¬ã®ãƒ¡ã‚¬ãƒç¥"];
  if(stage%5===0){
    enemy.name=bossNames[0];
    enemy.maxHp=150+stage*5;
  }else{
    enemy.name=names[Math.floor(Math.random()*names.length)];
    enemy.maxHp=60+stage*5;
  }
  enemy.hp=enemy.maxHp;
  update();
}

function update(){
  document.getElementById("enemyName").innerText=enemy.name;
  document.getElementById("enemyHPbar").style.width=(enemy.hp/enemy.maxHp*100)+"%";
  document.getElementById("enemyHPtext").innerText="æ•µHP "+enemy.hp+"/"+enemy.maxHp;
  document.getElementById("playerHPbar").style.width=(player.hp/player.maxHp*100)+"%";
  document.getElementById("playerHPtext").innerText="HP "+player.hp+"/"+player.maxHp;
  document.getElementById("level").innerText=player.level;
  document.getElementById("exp").innerText=player.exp;
  document.getElementById("rage").innerText=player.rage;
  document.getElementById("coins").innerText=player.coins;
  document.getElementById("stage").innerText="ã‚¹ãƒ†ãƒ¼ã‚¸ "+stage;
  save();
}

function log(t){document.getElementById("log").innerText=t;}

function attack(){
  let dmg=10+Math.floor(Math.random()*10);
  enemy.hp-=dmg;
  player.rage+=10;
  log("ãŸãŸãï¼ "+dmg+" ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼");
  turn();
}

function skill(){
  let dmg=20+Math.floor(Math.random()*15);
  enemy.hp-=dmg;
  player.rage+=15;
  log("ãƒ¡ã‚¬ãƒãƒ“ãƒ¼ãƒ ï¼ "+dmg+" ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼");
  turn();
}

function ultimate(){
  if(player.rage<100){log("ã‚²ãƒ¼ã‚¸ä¸è¶³ï¼");return;}
  let dmg=80;
  enemy.hp-=dmg;
  player.rage=0;
  log("ğŸ”¥è¶…å¿…æ®ºï¼ï¼ "+dmg+" ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ï¼");
  turn();
}

function turn(){
  if(enemy.hp<=0){
    player.exp+=20;
    player.coins+=15;
    stage++;
    log("å‹åˆ©ï¼EXP+20 ã‚³ã‚¤ãƒ³+15");
    levelUp();
    generateEnemy();
    return;
  }
  let dmg=8+stage;
  player.hp-=dmg;
  if(player.hp<=0){
    log("ã‚„ã‚‰ã‚ŒãŸâ€¦HPå…¨å›å¾©ï¼");
    player.hp=player.maxHp;
  }
  update();
}

function levelUp(){
  if(player.exp>=50){
    player.level++;
    player.exp=0;
    player.maxHp+=20;
    player.hp=player.maxHp;
    log("ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ Lv"+player.level);
  }
}

function shop(){
  if(player.coins>=30){
    player.coins-=30;
    player.maxHp+=10;
    player.hp=player.maxHp;
    log("æœ€å¤§HPã‚¢ãƒƒãƒ—ï¼");
  }else{
    log("ã‚³ã‚¤ãƒ³ä¸è¶³ï¼");
  }
  update();
}

function save(){
  localStorage.setItem("yuSave",JSON.stringify({player,stage}));
}

function load(){
  let data=localStorage.getItem("yuSave");
  if(data){
    let d=JSON.parse(data);
    player=d.player;
    stage=d.stage;
  }
}

load();
generateEnemy();
update();
</script>
</body>
</html>
